<!-- Empty element so popup.html has something to hang off of even --
  -- when an audio source hasn't been selected. -->
<audio src="" id="bgm"></audio>

<script src="jquery.min.js"></script>
<script>
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
  var snd = request.audioSrc,
      bgm = $('#bgm').remove();
  
  // Recreate the audio element so we can switch tracks.
  bgm     = $('<audio src="" id="bgm"></audio>').get(0);
  bgm.src = snd;
  bgm.play();

  document.body.appendChild(bgm);

  localStorage.setItem('origUrl', sender.tab.url);

  var notification = webkitNotifications.createNotification(
    'icon_128.png', 'Queued to play:',
    (snd.match(/\/([^/]+)$/))[1]
  );
  notification.show();
});
</script>
