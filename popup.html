<style>
body {
  min-width:  250px;
  min-height: 40px;
  overflow-x: hidden;
}

.control {
  padding:5px;
  border:2px solid black;
  vertical-align:middle;
  font-size: 12pt;
  cursor: pointer;
}

#controls {
  margin: 10px 5px;
  text-align: center;
}

#status {
  font-size: 10pt;
  color: #999;
}
</style>

<div id="controls">
  <span class="control" id="play">Play</span>
  <span class="control" id="pause">Pause</span>
</div>
<span id='status'>...</span>

<script src="jquery.min.js"></script>
<script>
$(function() {
  // Should be safe to do this on each load as the audio src can't
  // change without closing and reopening the popup.
  var audio = chrome.extension.getBackgroundPage().document.getElementById('bgm');

  // Setup controls
  $('#play').click(function() {
    if(audio.readyState != audio.HAVE_ENOUGH_DATA) {
      $('#status').text('Audio not available');
      return;
    }
    
    audio.play();
  });
  $('#pause').click(function() {
    if(audio.readyState != audio.HAVE_ENOUGH_DATA)
      return;

    audio.pause();
  });

  // Set status to the appropriate state
  $('#status').text(
    audio.readyState != audio.HAVE_ENOUGH_DATA
      ? 'Inactive'
      : !audio.paused
        ? 'Playing ...'
        : 'Paused.'
  );
  $(audio).bind('play',  function() { $('#status').text('Playing ...') });
  $(audio).bind('pause', function() { $('#status').text('Paused.')     });
});
</script>
